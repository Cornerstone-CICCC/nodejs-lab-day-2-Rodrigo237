---

---

<html lang="en">
	<head>
			<meta charset="utf-8" />
			<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
			<meta name="viewport" content="width=device-width, initial-scale=1" />
			<meta name="generator" content={Astro.generator} />
			<title>Sign Up</title>
			<!-- Bootstrap CSS (CDN) -->
			<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
	</head>
	<body>
			<div class="container py-5">
				<div class="row justify-content-center">
					<div class="col-12 col-md-6">
						<h2 class="mb-4">Sign Up</h2>
						<form id="form-signup" class="card p-4 shadow-sm">
							<input class="form-control mb-2" type="text" name="username" placeholder="Username" required>
							<input class="form-control mb-2" type="password" name="password" placeholder="Password" required>
							<input class="form-control mb-2" type="text" name="firstName" id="firstName" placeholder="First Name" required>
							<input class="form-control mb-3" type="text" name="lastName" id="lastName" placeholder="Last Name" required>
							<button class="btn btn-primary w-100" type="submit">Create Account</button>
						</form>
					</div>
				</div>
				<hr />
			</div>

		<script>
			// Sign up
			const signUpForm = document.getElementById('form-signup')
			if (signUpForm instanceof HTMLFormElement) {
				signUpForm.addEventListener('submit', async (e) => {
					e.preventDefault()
					const formData = new FormData(signUpForm)
					const username = formData.get('username')
					const password = formData.get('password')
					const firstName = formData.get('firstName')
					const lastName = formData.get('lastName')

					try {
						const res = await fetch('http://localhost:3700/users/signup', {
							method: "POST",
							headers: { "Content-type": "application/json" },
							body: JSON.stringify({ username, password, firstName, lastName })
						})
						const data = await res.json()
						if (!res.ok) { // Check if status is not success (400, 500, ...)
							console.error(data.message)
							return
						}
						// Redirect to login page after successful signup
						window.location.href = '/login'
					} catch (err) {
						console.error(err)
					}
				})
			}
		</script>
    <!-- Bootstrap JS bundle (optional, provides components) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	</body>
</html>
